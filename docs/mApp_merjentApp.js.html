<!-- start:source.tmpl.hbs -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
		<title>mApp/merjentApp.js</title>
		<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<link href="https://fonts.googleapis.com/css?family=PT+Mono" rel="stylesheet">
		<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css">
		<link type="text/css" rel="stylesheet" href="css/prism.min.css">
		<link type="text/css" rel="stylesheet" href="css/template.min.css">
		<script type="text/javascript">
			window.TEMPLATE_OPTIONS = {"includeDate":true,"dateFormat":"Do MMM YYYY","systemName":"Merjent Fulcrum Tools","systemSummary":"Modules for common tasks in Merjent Fulcrum apps","systemLogo":"","systemColor":"","navMembers":[{"kind":"module","title":"Modules","summary":"All documented modules."},{"kind":"class","title":"Classes","summary":"All documented classes."},{"kind":"external","title":"Externals","summary":"All documented external members."},{"kind":"global","title":"Globals","summary":"All documented globals."},{"kind":"mixin","title":"Mixins","summary":"All documented mixins."},{"kind":"interface","title":"Interfaces","summary":"All documented interfaces."},{"kind":"namespace","title":"Namespaces","summary":"All documented namespaces."},{"kind":"tutorial","title":"Tutorials","summary":"All available tutorials."}],"footer":"","copyright":"Mtools Copyright © 2025 Mikel Paiva","linenums":true,"collapseSymbols":true,"inverseNav":true,"inlineNav":false,"outputSourceFiles":false,"sourceRootPath":null,"disablePackagePath":true,"outputSourcePath":false,"showTableOfContents":false,"showAccessFilter":true,"analytics":null,"methodHeadingReturns":true,"sort":"longname","search":true,"favicon":null,"stylesheets":[],"scripts":[],"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":false}};
			window.DOCLET_TOC_ENABLED = false;
			window.DOCLET_AFILTER_ENABLED = false;
		</script>
</head>
<body>
	<!-- start:navbar.hbs -->
	<header class="navbar navbar-default navbar-fixed-top navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand" href="index.html">
					Merjent Fulcrum Tools
				</a>
				<!-- displayed on small devices -->
				<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<div class="navbar-collapse collapse" id="topNavigation">
				<ul class="nav navbar-nav">
								<li class="dropdown">
									<a href="list_class.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
									<ul class="dropdown-menu">
											<li><a href="DataEventHelpers.html">DataEventHelpers</a></li>
											<li><a href="FieldHelpers.html">FieldHelpers</a></li>
											<li><a href="FulcrumHelpers.html">FulcrumHelpers</a></li>
											<li><a href="Helpers.html">Helpers</a></li>
											<li><a href="MerjentApp.html">MerjentApp</a></li>
											<li><a href="ReportHelpers.html">ReportHelpers</a></li>
											<li><a href="RequestHelpers.html">RequestHelpers</a></li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="list_module.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
									<ul class="dropdown-menu">
											<li><a href="module-dataEventMtools.html">dataEventMtools</a></li>
											<li><a href="module-merjentAppModule.html">merjentAppModule</a></li>
											<li><a href="module-reportMtools.html">reportMtools</a></li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="list_namespace.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b class="caret"></b></a>
									<ul class="dropdown-menu">
											<li><a href="MerjentApp.AppTemplates.html">MerjentApp.AppTemplates</a></li>
											<li><a href="MerjentApp.DefaultMethods.html">MerjentApp.DefaultMethods</a></li>
											<li><a href="MerjentApp.PermissionMethods.html">MerjentApp.PermissionMethods</a></li>
											<li><a href="MerjentApp.StatusMethods.html">MerjentApp.StatusMethods</a></li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="list_tutorial.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
									<ul class="dropdown-menu">
											<li><a href="tutorial-CHANGELOG.html">CHANGELOG</a></li>
											<li><a href="tutorial-Other.html">Other Development Information</a></li>
											<li><a href="tutorial-Overview.html">Overview</a></li>
									</ul>
								</li>
				</ul>
					<!-- start:lunr-search-navbar.hbs -->
					<form class="navbar-form navbar-right" role="search">
						<div class="input-group">
							<input type="text" class="form-control" placeholder="Search" id="lunr-search-input">
							<div class="input-group-btn">
								<button class="btn btn-default" id="lunr-search-submit">
									<i class="glyphicon glyphicon-search"></i>
								</button>
							</div>
						</div>
					</form>
					<!-- start:lunr-search-navbar.hbs -->		</div>
		</div>
	</header>
	<!-- end:navbar.hbs -->		<div class="page-header">
			<div class="container">
				<span class="kind">source</span>
				<h1><span class="name">mApp/merjentApp.js</span></h1>
			</div>
		</div>
	<div class="container content">
		<div class="row">
			<div class="col-md-12 main-content">
		<section class="source-section">
			<article></article>
			<pre class="prettyprint source language-javascript line-numbers"><code class="language-javascript">import { AppTemplates } from './AppTemplates';
import { TemplateMethods } from "./TemplateMethods";
import { DefaultMethods } from "./DefaultMethods";
import { StatusMethods } from "./StatusMethods";
import { PermissionMethods } from './PermissionMethods';

//#region ********************************** MERJENT APP SETTINGS OBJECT ***************************************
/**
 * @description This class handles common data events in Mejent fulcrum Apps.
 * 
 * To turn off fieldLock and completeLock set mApp. mApp.completeLockCondition = [] or mApp.fieldLockCondition = [].
 * To turn off the updateStatus method set mApp.dnSubmit = null
 * @example
 * mApp.dnSubmit = null
 * mApp.completeLockCondition = []
 * mApp.fieldLockCondition = []
 */
class MerjentApp {
  constructor() {
    //Templates
    this.templateMethods = TemplateMethods(this);
    
    /** 
     * @type {AppTemplates} 
     * @name MerjentApp.appTemplates
     * @property {Function} template_default - The default starting template. All methods come from this.DefaultMethods.
    */
    this.appTemplates = AppTemplates(this);

    /**
     * @type {DefaultMethods}
     * @name MerjentApp.defaultMethods
     * @property {Function} start - Runs: updatePermission > updateStatus > if lockOnLoad == true then updateLock* 123
     * @property {Function} enterReportID - Set report id to: `{report year}{report month}{report day} T {current hours}{current minutes} _ {user initials}`
     * @property {Function} getPermissions - {string} Gets the permission level of the USER: Admin | Editor | User | Viewer
     * @property {Function} getCompleteLockStatus - {boolean} Is the status condition for this.completeLock true
     * @property {Function} baseUpdatePermission - Base update permission restrictions for setting fields readonly
     * @property {Function} addUpdatePermission - Addon update permission restrictions for setting fields readonly
     * @property {Function} updatePermission - baseUpdatePermission() &amp; addUpdatePermission combined
     * @property {Function} getStatus - {string} Function for checking conditions for status
     * @property {Function} updateStatus - Update stats
     * @property {Function} getLockStatus - {boolean} Is the status condition for this.fieldLock true
     * @property {Function} updateLock - Turns the field lock on/off depending on value of getLockStatus(). Defaults to all fields except this.dnSubmit
     * @property {Function} baseLockEditing - Checks for field lock conditions and calls updateLock(). Default condition is if this.dnSubmit == 'yes' 
     * @property {Function} addLockEditing - Addon conditions for field lock
     * @property {Function} lockEditing - baseLockEditing() and  addLockEditing() combined
     * @property {Function} validatePhoto - Calls photo validation methods if this.requireLandscape = true or this.setLocoff1photo = true;
     * @property {Function} addCoordinatorInitials - Adds coordinators intials when this.dnReviewed is checked 'yes'
     * @property {Function} limitCaption - Alert for text in photo caption exceeding this.photoCapMax length. Default is 1258.
     * @property {Function} validateAllPhotos - Alert for record submitted without photo captions
     */
    this.defaultMethods = DefaultMethods(this);

    /** 
     * @description This is a list of template getStatus() methods. Each one is setup for a set of status values. 
     * Most of the changes in status are triggerd by changes in the value of the this.dnSubmit and this.dnReviewed fields. 
     * 
     * Most methods assume that fields are Y/N fields and a value of 'yes' triggers the change in status. Exceptions are noted.
     * @type {StatusMethods}
     * @name MerjentApp.statusMethods
     * @property {Function} active_resolved - [Active, Resolved]
     * @property {Function} draft_complete - [Draft, Complete]
     * @property {Function} p_s_complete - [Pending, Submitted, Complete]
     * @property {Function} p_s_c_f_resolved - [Pending, Submitted, Complete, Follow-up, Resolved] 
     * @property {Function} p_s_c_f_resolved_date - [Pending, Submitted, Complete, Follow-up, Resolved] 
     * 
    */
    this.statusMethods = StatusMethods(this);

    /** 
     * @type {PermissionMethods} 
     * @name MerjentApp.permissionMethods
     * @property {Function} hideCoordInit - Addon for update permissions that shows/hides this.dnReviewed and this.dnCoordinatorInitials depending on user permission levels.
    */
    this.permissionMethods = PermissionMethods(this);

    // MERJENT APP PERMISSION PROPERTIES
    /**
     * @description - Array of user names to have "Admin" privleges in this app.
     * @default - ['Jason Hendricks', 'Amanda Johnson', 'Mikel Paiva']
     * @type {string[]}
     */
    this.adminNames = ['Jason Hendricks', 'Amanda Johnson'];

    /**
     * @description - Array of user names to have "Editor" privleges in this app.
     * @default - []
     * @type {string[]}
     */
    this.editorNames = [];
    
    /**
     * @description - Array of user names to have "User" privleges in this app.
     * @default - []
     * @type {string[]}
     */
    this.userNames = [];

    /**
     * @description - Array of user names to have "Viewer" privleges in this app.
     * 
     * The default getPermissions() method places all users not listed in another permission level in this category.
     * @default - ['Field User 1', 'Field User 2']
     * @type {string[]}
     */
    this.viewerNames = ['Field User 1', 'Field User 2'];

    /**
     * @description - Array of Fulcrum user roles to have "Admin" privleges in this app.
     * @default - []
     * @type {string[]}
     */
    this.adminRoles = [];

    /**
     * @description - Array of Fulcrum user roles to have "Editor" privleges in this app.
     * @default - []
     * @type {string[]}
     */
    this.editorRoles = [];

    /**
     * @description - Array of Fulcrum user roles to have "User" privleges in this app.
     * @default - []
     * @type {string[]}
     */
    this.userRoles = [];

    /**
     * @description - Array of Fulcrum user roles to have "Viewer" privleges in this app.
     * @default - []
     * @type {string[]}
     */
    this.viewerRoles = [];


    // MERJENT APP OTHER PROPERTIES
    /**
     * @description - Option to check for fieldLock on load.
     * @default - true
     * @type {boolean}
     */
    this.lockOnLoad = true;

    /**
     * @summary - The default permission level for users that are not specified as being under a specific permission level.
     * @description - Possible values are 'Admin', 'Editor', 'User', 'Viewer'.
     * @default - 'User'
     * @type {string}
     * 
     */
    this.defaultPermissionLevel = 'User';


    // MERJENT APP PHOTO PROPERTIES
    /**
     * @description - Max characters allowed in a photo caption
     * @default - 1258
     * @type {number}
     */
    this.photoCapMax = 1258

    /**
     * @description - Option to force landscape format for the photo field with data name mApp.dnPhotoLoc
     * @default - false
     * @type {boolean}
     */
    this.requireLandscape = false;

    /**
     * @description - Option to set the record location to the location of the first photo taken from photo field with data name mApp.dnPhotoLoc
     * @default - false
     * @type {boolean}
     */
    this.setLocoff1photo = false;

    /**
     * @description - Disable location editing for User and Editor. Checked in default updatePermission method. Calls M.disableLocationEdit()
     * @default - false
     * @type {boolean}
     */
    this.disableLocationEdit = false;

    // MERJENT APP DATA NAME PROPERTIES
    /**
     * @description - Data name of the primary report date field.
     * @default - 'date'
     * @type {string}
     */
    this.dnDt = 'date'

    /**
     * @description - Data name of the report id field.
     * @default - 'report_id'
     * @type {string}
     */
    this.dnReportID = 'report_id'

    /**
     * @description - Data name of the follow=up required y/n field.
     * @default - 'report_id'
     * @type {string}
     */
    this.dnFollowUp = 'follow_up_required';

    /**
     * @description - Data name of the follow-up resolved field. Could be a y/n field or a date field.
     * @default - 'resolved_date'
     * @type {string}
     */
    this.dnResolved = 'resolved_date';

    /**
     * @description - Data name of the follow-up repeatable field.
     * @default - 'follow_up_report'
     * @type {string}
     */
    this.dnFollowUpRepeatable = 'follow_up_report';

    /**
     * @description - Data name of the 'submit_report' field. Default status functions are checking for value of 'yes'. Turns on field lock.
     * If you are not using the updateStatus data event set this to null.
     * @example
     * mApp.dnSubmit = null //Turns off updatStatus Method.
     * @default - 'submit_report'
     * @type {string}
     */
    this.dnSubmit = 'submit_report';

    /**
     * @description - Data name of the 'coordinator_reviewed' field. Default status functions are checking for value of 'yes'. Turns on complete lock.
     * @default - 'coordinator_reviewed'
     * @type {string}
     */
    this.dnReviewed = 'coordinator_reviewed';

    /**
     * @description - Data name of the 'dnCoordinatorInitials' field. Signed with coordinator initials when mApp.dnReviewed gets checked 'yes'
     * @default - 'coordinator_reviewed'
     * @type {string}
     */
    this.dnCoordinatorInitials = 'coordinator_initials';

    /**
     * @description - Data name of the photo field to use for setting record location and also landscape validation.
     * @default - 'site_photos'
     * @type {string}
     */
    this.dnPhotoLoc = 'site_photos';

    /**
     * @description - Array of photo names to check for missing captions and exceeding max character limit.
     * @default - 'site_photos'
     * @type {Array}
     */
    this.allPhotos = ['site_photos']

    /**
     * @description Array of status values to match for turning on complete record lock.
     * 
     * To turn off complete lock use empty array [].
     * @type {string[]}
     * @default - ['Complete', 'Resolved']
     * @example mApp.completeLockCondition = []
     */
    this.completeLockCondition = ['Complete', 'Resolved']

    /**
     * @description Array of data names to exclude from read-only status when complete lock is on.
     * @type {string[]}
     * @default - [this.dnSubmit,this.dnReviewed]
     */
    this.completeLockExclude = [this.dnSubmit,this.dnReviewed]

    /**
     * @description Array of status values to match for turning on field lock.
     * 
     * To turn off field lock use empty array [].
     * @type {string[]}
     * @default - ['Submitted']
     * @example mApp.fieldLockCondition = []
     */
    this.fieldLockCondition = ['Submitted'];

    /**
     * @description Array of data names to exclude from read-only status when field lock is on.
     * @type {string[]}
     * @default - [this.dnSubmit]
     */
    this.fieldLockExclude = [this.dnSubmit];

    this.install_template()
  }

  /**
   * @description Installs app template settings from template located in mApp.appTemplates
   * @param {*} newTemplate
   * @default - null (This is the default template)
   * @returns {Function} - The app template function that binds its methods to this instance of Merjent App
   */
  install_template= function (newTemplate = null){
    var loader = newTemplate ? newTemplate : this.appTemplates.template_default
      loader()
  }

  
  //****METHODS****
  //STATUS METHODS
  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  start(event) {}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  enterReportID(event){}

  /**
   * @description Description placeholder
   *
   * @returns {string}
   */
  reportIDprefix(){}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  addCoordinatorInitials(event) {}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   * @returns {string} 
   */
  getStatus(event) {return '';}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  updateStatus(event) {}

  //PERMISSION METHODS

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   * @returns {string} 
   */
  getPermissions(event) {return 'User';}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  getCompleteLockStatus(event){}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  baseUpdatePermission(event){}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  addUpdatePermission(event){}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  updatePermission(event) {}

  //FIELD LOCK METHODS
  /**
   * @description Description placeholder
   *
   * @param {*} event 
   * @returns {boolean} 
   */
  getLockStatus(event) {return false;}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  updateLock(event) {}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  baseLockEditing(event){}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  addLockEditing(event){}
  
  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  lockEditing(event) {}

  //PHOTO METHODS
  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  validatePhoto(event) {}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  limitCaption(event){}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  validateAllPhotos(event){}

  /**
   * @description Description placeholder
   *
   * @param {*} event 
   */
  disableNewRecordCreation(event){}
}

//#endregion

export { MerjentApp }
</code></pre>
		</section>
			</div>
		</div>
	</div>
	<footer>
				<div class="copyright">Mtools Copyright © 2025 Mikel Paiva</div>
			<div class="generated-by">Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a> on 27th Oct 2025 using the <a href="https://github.com/steveush/foodoc">FooDoc template</a>.</div>
	</footer>
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/clipboard.min.js"></script>
	<script src="js/prism.min.js"></script>
	<script src="js/template.min.js"></script>
		<!-- start:lunr-search-modal.hbs -->
		<div class="modal fade" id="lunr-search-modal">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">Search results</h4>
					</div>
					<div class="modal-body" id="lunr-search-body">
					</div>
					<div class="modal-footer" id="lunr-search-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div>
		<!-- end:lunr-search-modal.hbs -->		<script src="js/lunr.min.js"></script>
	
</body>
</html>
<!-- end:source.tmpl.hbs -->