<!-- start:source.tmpl.hbs -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
		<title>Mtools/FulcrumHelpers.js</title>
		<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<link href="https://fonts.googleapis.com/css?family=PT+Mono" rel="stylesheet">
		<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css">
		<link type="text/css" rel="stylesheet" href="css/prism.min.css">
		<link type="text/css" rel="stylesheet" href="css/template.min.css">
		<script type="text/javascript">
			window.TEMPLATE_OPTIONS = {"includeDate":true,"dateFormat":"Do MMM YYYY","systemName":"Merjent Fulcrum Tools","systemSummary":"Modules for common tasks in Merjent Fulcrum apps","systemLogo":"","systemColor":"","navMembers":[{"kind":"module","title":"Modules","summary":"All documented modules."},{"kind":"class","title":"Classes","summary":"All documented classes."},{"kind":"external","title":"Externals","summary":"All documented external members."},{"kind":"global","title":"Globals","summary":"All documented globals."},{"kind":"mixin","title":"Mixins","summary":"All documented mixins."},{"kind":"interface","title":"Interfaces","summary":"All documented interfaces."},{"kind":"namespace","title":"Namespaces","summary":"All documented namespaces."},{"kind":"tutorial","title":"Tutorials","summary":"All available tutorials."}],"footer":"","copyright":" ","linenums":true,"collapseSymbols":true,"inverseNav":true,"inlineNav":false,"outputSourceFiles":false,"sourceRootPath":null,"disablePackagePath":true,"outputSourcePath":false,"showTableOfContents":false,"showAccessFilter":true,"analytics":null,"methodHeadingReturns":true,"sort":"longname","search":true,"favicon":null,"stylesheets":[],"scripts":[],"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":false}};
			window.DOCLET_TOC_ENABLED = false;
			window.DOCLET_AFILTER_ENABLED = false;
		</script>
</head>
<body>
	<!-- start:navbar.hbs -->
	<header class="navbar navbar-default navbar-fixed-top navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand" href="index.html">
					Merjent Fulcrum Tools
				</a>
				<!-- displayed on small devices -->
				<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<div class="navbar-collapse collapse" id="topNavigation">
				<ul class="nav navbar-nav">
								<li class="dropdown">
									<a href="list_class.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
									<ul class="dropdown-menu">
											<li><a href="DataEventHelpers.html">DataEventHelpers</a></li>
											<li><a href="FieldHelpers.html">FieldHelpers</a></li>
											<li><a href="FulcrumHelpers.html">FulcrumHelpers</a></li>
											<li><a href="Helpers.html">Helpers</a></li>
											<li><a href="MerjentApp.html">MerjentApp</a></li>
											<li><a href="MLoadRecs.html">MLoadRecs</a></li>
											<li><a href="ReportHelpers.html">ReportHelpers</a></li>
											<li><a href="RequestHelpers.html">RequestHelpers</a></li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="list_module.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
									<ul class="dropdown-menu">
											<li><a href="module-dataEventMtools.html">dataEventMtools</a></li>
											<li><a href="module-merjentAppModule.html">merjentAppModule</a></li>
											<li><a href="module-reportMtools.html">reportMtools</a></li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="list_namespace.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b class="caret"></b></a>
									<ul class="dropdown-menu">
											<li><a href="MerjentApp.AppTemplates.html">MerjentApp.AppTemplates</a></li>
											<li><a href="MerjentApp.DefaultMethods.html">MerjentApp.DefaultMethods</a></li>
											<li><a href="MerjentApp.PermissionMethods.html">MerjentApp.PermissionMethods</a></li>
											<li><a href="MerjentApp.StatusMethods.html">MerjentApp.StatusMethods</a></li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="list_tutorial.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
									<ul class="dropdown-menu">
											<li><a href="tutorial-Merjent_App_Tutorial.html">Merjent_App_Tutorial</a></li>
											<li><a href="tutorial-Utils.html">Utils</a></li>
									</ul>
								</li>
				</ul>
					<!-- start:lunr-search-navbar.hbs -->
					<form class="navbar-form navbar-right" role="search">
						<div class="input-group">
							<input type="text" class="form-control" placeholder="Search" id="lunr-search-input">
							<div class="input-group-btn">
								<button class="btn btn-default" id="lunr-search-submit">
									<i class="glyphicon glyphicon-search"></i>
								</button>
							</div>
						</div>
					</form>
					<!-- start:lunr-search-navbar.hbs -->		</div>
		</div>
	</header>
	<!-- end:navbar.hbs -->		<div class="page-header">
			<div class="container">
				<span class="kind">source</span>
				<h1><span class="name">Mtools/FulcrumHelpers.js</span></h1>
			</div>
		</div>
	<div class="container content">
		<div class="row">
			<div class="col-md-12 main-content">
		<section class="source-section">
			<article></article>
			<pre class="prettyprint source language-javascript line-numbers"><code class="language-javascript">import { Helpers } from './Helpers';
//#region *****************************  FULCRUM DATA EVENT HELPERS **********************************/
/**
 * @summary Helper methods specific to Fulcrum
 * @description The methods in this class use Fulcrum expressions to complete common sets of actions used in Merjent Fulcrum Apps.
 */
class FulcrumHelpers extends Helpers{
  constructor(){super()}
  /**
   * @description Sets all fields visible if USERROLE() == 'Owner'
   *
   * @param {*} event 
   * @returns {void} 
   */
  devUnhide(event){
    const dns = DATANAMES();
    return ISROLE('Owner') ? 
      dns.forEach(dn => SETHIDDEN(dn, false)) : null;
  }

  /**
   * @description Sets all fields editable if USERROLE() == 'Owner'
   *
   * @param {*} event 
   * @returns {void} 
   */
  devEdit(event){
    const dns = DATANAMES();    
    return ISROLE('Owner') ?
      dns.forEach(dn => SETREADONLY(dn, false)) : null;
  }
  
  /**
   * @description Description placeholder
   *
   * @param {boolean} [bol=false] - Set field to readonly, null sets to default.
   * @param {string[]} [exc] - Array of datanames to exclude
   * @param {string} [sec=''] - Restrict function to only data names in this section
   * @returns {void}
   */
  setAllRO(bol = false, exc, sec = ''){
    var excludeFlds = exc ? exc : [];
    var dns = sec ? FIELDNAMES(sec) : DATANAMES();
    for(const dn of dns) {
      if (!excludeFlds.includes(dn)) {
        SETREADONLY(dn, bol);
      }
    };
  }

  /**
   * @description Checks if user email ends in'merjent.com'
   * 
   * @returns boolean
   */
  isMerjentEmail(){
    var email = EMAIL()
    const dom = M.strAfter(email,'@')
    return dom == 'merjent.com' ? true : false
  }

  /** 
   * @description Disable editing location 
   * 
   * @returns {void}
   * 
  */
  disableLocationEdit(){
    var config = {
      auto_location_enabled: false,
      auto_location_minimum_accuracy: 10,
      manual_location_enabled: false,
      edit_locations_enabled: false,
      edit_durations_enabled: false
    };
    SETFORMATTRIBUTES(config);
  }

  /**
   * @description Gets users initials
   *
   * @returns {string} 
   */
  getUserInit(){
    var names = USERFULLNAME().split(' ');
    var inits = names.map(x => x.substring(0, 1).toUpperCase());
    return inits.join('');
  }

  /**
   * @description Get information pieces used to build report id
   *
   * @param {string} [reportDate=null] 
   * @returns {{ yr: string, month: string, day: string, hr: string, min: string, init: string, report_yr: string, report_month: string, report_day: string}} 
   */
  getReportIDvars(reportDate=null){
    const dt = reportDate || new Date();
    const yr = dt.getFullYear().toString();
    const month = this.padZero(dt.getMonth() + 1, 2);
    const day = this.padZero(dt.getDate(), 2);
    const hr = this.padZero(dt.getHours(), 2);
    const min = this.padZero(dt.getMinutes(), 2);
    const init = this.getUserInit();

    return {"yr":yr,"month":month,"day":day,"hr":hr,"min":min,"init":init}
  }

  /**
   * @description Require photo to be taken landscape
   *
   * @param {*} event 
   * @returns {boolean}
   */
  photoLandscape(event){
    if (event.value.width &lt; event.value.height) {
      INVALID('Please retake the photo in landscape orientation.');
      return false
    } else {return true}
  }

  /**
   * @description Sets record location to the location of the first photo taken
   *
   * @param {*} event 
   * @returns {void}
   */
  photoSetLoc(event){
    var dn = event.field;
    if (!VALUE(dn)) {
      var lat = event.value.latitude;
      var lon = event.value.longitude;
      SETLOCATION(lat, lon);
      //ALERT("Record Location Set to: " + lat.toString() + lon.toString())
    }
  }

  //for use in an ON click function
  /**
   * @description Gets current lat/lon
   *
   * @param {string} [dn=null] - output field data name to write to
   * @returns {string}
   */
  setLatLon(dn){
    var loc = CURRENTLOCATION()
    if(loc){
      var output = loc.latitude + ',' + loc.longitude
      if(dn){
        SETVALUE(dn,output)
      }
      return output
    } else {
      ALERT('No GPS information available')
    }
  }

  /**
   * @description Checks photofield for photos without a caption. Returns an Alert.
   *
   * @param {string} dn 
   * @returns {boolean}
   */
  check4PhotoCaps(dn) {
    const photos = VALUE(dn) || [];
    const captions = photos.map(x => x.caption);
    for (const caption of captions) {
      if (!caption) {
        ALERT('This report contains photos without a caption');
        return false;
      }
    }
    return true;
  }
  
  /**
   * @description Description placeholder
   *
   * @param {*} indDns 
   * @param {Array.&lt;string>} [excDns=[]] 
   * @returns {{}} 
   */
  getFldSummaryObj(indDns,excDns=[]){
    var excludeFldTypes = ['Label','Section','HyperlinkField'];
    var dns = indDns.filter((x) => !excludeFldTypes.includes(FIELDTYPE(x))).filter((x) => !excDns.includes(x)); 
    var obj = {};
    for(const dn of dns){
      var val = VALUE(dn)
      FIELDTYPE(dn) == 'ChoiceField' || FIELDTYPE(dn) == 'ClassificationField' ? obj[dn] = CHOICEVALUES(val) :
        FIELDTYPE(dn) != 'ChoiceField' &amp;&amp; FIELDTYPE(dn) != 'ClassificationField' ? obj[dn] = val :
          FIELDTYPE(dn) == 'DateTimeField' ? obj[dn] =  this.dt2iso(val) :
            FIELDTYPE(dn) == 'Repeatable' ? obj[dn] = this.rep2Obj(dn,excDns) : obj[dn] = JSON.stringify(val)
    }
    return obj
  }
  
  /**
   * @description Converts a repeatable to an Object. Input repeatable data name.
   *
   * @param {string} repeatableDn 
   * @param {string[]} [excDns=[]] 
   * @returns {Object[]} 
   */
  rep2Obj(repeatableDn,excDns=[]){
    var repeatable = VALUE(repeatableDn);
    var excludeFldTypes = ['Label','Section','Repeatable','HyperlinkField'];
    var dns = FIELDNAMES(repeatableDn).filter((x) => !excludeFldTypes.includes(FIELDTYPE(x))).filter((x) => !excDns.includes(x)); 
    var rows = [];
  
    if(VALUE(repeatableDn)){
      for(var i = 0; i &lt; repeatable.length; i++){
        var obj = {}
        obj["itemNo"] = i+1
        for(const dn of dns){
          var val = REPEATABLEVALUES(repeatable,dn)[i]
          FIELDTYPE(dn) == 'ChoiceField' || FIELDTYPE(dn) == 'ClassificationField' ? obj[dn] = CHOICEVALUES(val) :
            FIELDTYPE(dn) != 'ChoiceField' &amp;&amp; FIELDTYPE(dn) != 'ClassificationField' ? obj[dn] = val :
              FIELDTYPE(dn) == 'DateTimeField' ? obj[dn] =  this.dt2iso(val) : obj[dn] = JSON.stringify(val)
        }
        rows.push(obj)
      }
    }
    return rows
  }

  /**
   * Converts an array of objects to an array of summary strings, excluding specified keys.
   * Each summary string lists key-value pairs separated by commas.
   * @param {Object[]} rows - Array of objects to summarize.
   * @param {string[]} [excDns=[]] - Array of keys to exclude from summary.
   * @returns {string[]}
   */
  obj2Summary(rows, excDns = []) {
    const outList = [];
    for (const row of rows) {
      let line = '';
      const keys = Object.keys(row).filter(key => !excDns.includes(key));
      for (const key of keys) {
        line += `${key}: ${row[key]},`;
      }
      outList.push(line);
    }
    return outList;
  }

  /**
   * Converts an array of Fulcrum rows to an array of objects with data names as keys.
   * Uses a dictionary to map form_value keys to data names.
   * @param {Object[]} rows - Array of Fulcrum record objects.
   * @param {Object} dict - Dictionary mapping form_value keys to data names.
   * @returns {Object[]} - Array of objects with mapped keys and values.
   */
  convertFV2DN(rows, dict) {
    const output = [];
    for (const row of rows) {
      const newRow = {};
      newRow.status = row.status;
      newRow.id = row.id;
      newRow.latitude = row.latitude;
      newRow.longitude = row.longitude;
      newRow.geometry = row.geometry;
      const keys = Object.keys(row.form_values);
      for (const key of keys) {
        newRow[dict[key]] = row.form_values[key];
      }
      output.push(newRow);
    }
    return output;
  }

  /**
   * @description Wrapper function for LOADRECORDS() expression.
   *
   * @param {Array.&lt;string>} arr 
   * @param {string} formID 
   * @param {Function} callback - function to process records and store them to a variable or field. Callback must have one parameter for records. See example.
   * @return {void}
   * @example
   * processRecordsCallback(records){
   *   loadedRecords = convertFV2DN(records,loadedFvs)
   *   var out = []
   *   for(const record of loadedRecords){
   *     var add = record.scientific_name + ' - ' + record.common_name
   *     out.push(add)
   *   }
   *   SETVALUE('result',out.join('\n'))
   * }
   * 
   * M.loadRecords(recIDs,appID,processRecordsCallback)
   * 
   */
  loadRecords(arr,formID,callback){
    const opts = !arr ? {'form_id':formID} : {'ids':arr,'form_id':formID};
    const pullRecords = (err,r)=>{
      if(err){ALERT('LOADRECORDS failed:' + JSON.stringify(err));}else{callback(r.records)}
    }
    LOADRECORDS(opts,pullRecords);
  }

  /**
   * Recursively collects all leaf elements from a Fulcrum form schema.
   * @param {Object} parent - The parent element to start from.
   * @param {Array} collector - The array to collect elements into.
   */
  digElements(parent, collector) {
    if (parent.elements &amp;&amp; Array.isArray(parent.elements)) {
      for (const subElement of parent.elements) {
        this.digElements(subElement, collector);
      }
    } else if (parent) {
      collector.push(parent);
    }
  }
  
  /**
   * @description Input a fulcrum form schema Object and returns a dictionary object of {data_name:form_value}.
   *
   * @param {Object} form - Fulcrum form schema object.
   * @returns {Array} - Array of leaf elements.
   */
  extractFormElements(form) {
    const output = [];
    if (form &amp;&amp; form.elements) {
      for (const element of form.elements) {
        this.digElements(element, output);
      }
    }
    return output;
  }
    
  /**
   * @description Input an object of pairs. Outputs an object with {key:value} switched.
   *
   * @param {*} obj 
   * @returns {*} 
   */
  flipKVpair(obj){
    return Object.fromEntries(Object.entries(obj).map(([k,v])[v,k]))
  }
  
  /**
   * @description Description placeholder
   *
   * @param {string} formID - fulcrum form id
   * @param {Function} callback - function to process form schema
   * @returns {void}
   * 
   * @example 
   *  processFormCallback(form){
   *     loadedFvs = M.flipKVpair(this.makeFvDict(form))
   *  }
   * 
   * M.loadForm(formID,processFormCallback)
   */
  loadForm(formID,callback){
    LOADFORM(
      {id:formID},
      (err,r)=>{if(err){ALERT('LOADFORM failed:' + JSON.stringify(err))}else{callback(r.form)}}
    )
  }

  /**
   * @description Performs callback function on each data name in a section.
   *
   * @param {string} secDn - Section data name.
   * @param {Function} callback - Function to perform for each data name.
   * @returns {void}
   */
  eachSecDn(secDn,callback,exc=[]){
    if(FIELDNAMES(secDn)){
      var dns = FIELDNAMES(secDn)
      for(const dn of dns){
        if(!exc.includes(dn)){
          callback(dn)
        }
      }
    }
  }

  /**
   * @description Clears value in fulcrum field.
   *
   * @param {string} dn - Data name to clear.
   * @returns {void}
   */
  clear(dn){
    if(VALUE(dn)){
      SETVALUE(dn,null)
    }
  }

  /**
   * @description Description placeholder
   *
   * @param {*} repVals - this is from VALUE(repeatable data name)
   * @param {string} dnFv 
   * @returns {{}} 
   */
  getRepeatableValues(repVals,dnFv){ 
    var out =[]
    for(const row of repVals){
      var formVals = row.form_values
      var dnVal = {}
      
      Object.keys(formVals).forEach(function(fv){
        dnVal[dnFv[fv]] = formVals[fv] || null
      })
      out.push(dnVal)
    }
    return out
  }/** @description Description placeholder */
  ;
    
  /**
   * @description Description placeholder
   *
   * @param {string} parentDn 
   * @param {string} childDn 
   * @param {string} dnFv 
   * @returns {{}} 
   */
  getNestedRepeatable(parentDn,childDn,dnFv){
    var outputList = []
    var parentRep = VALUE(parentDn)
    if(parentRep){
      for(var i = 0; i &lt; parentRep.length; i++){
        var output = {}
        var childRep = parentRep[i].form_values[dnFv[childDn]] || null
        if(childRep){
          output.task = parentRep[i].form_values[dnFv.task].choice_values[0] || null
          output.subtask = parentRep[i].form_values[dnFv.subtask].choice_values[0] || null
          output[childDn] = this.getRepeatableValues(childRep)
          outputList.push(output)
        }
      }
    }
    return outputList
  }

  /**
   * @description Description placeholder
   *
   * @param {string} dn 
   * @param {number} max 
   * @returns {void}
   */
  checkPhotoCapLen(dn,max){
    var photos = VALUE(dn)
    for(const photo of photos){
      if(photo &amp;&amp; photo.caption &amp;&amp; photo.caption.length > max){
        ALERT(`Photo caption ${max}`)
      }
    }
  }

  /**
   * @summary block input into form with an alert message for a set time in milliseconds.
   *
   * @param {number} time - milliseconds for settimeout
   * @returns {void}
   */
  timedProcessingMsg(time){
    var showAlert = true
    var msgOpts = {title:'Standby',message:'Requesting Data...',buttons:['ok']}
    var turnOff = function(result){
      if(showAlert){
        MESSAGEBOX(msgOpts,turnOff);
      } else{ }
    }
    SETTIMEOUT(function(){showAlert=false},time)
    MESSAGEBOX(msgOpts,turnOff);
  }
  
  /**
   * @summary block input into form with an alert message until a value is present in the specified data name or until a settimeout.
   *
   * @param {string} dn 
   * @param {number} time - milliseconds for settimeout
   * @returns {void}
   */
  valProcessingMsg(dn,time,isBlank=this.isBlank){
    SETVALUE(dn,null)
    var showAlert = true
    var msgOpts = {title:'Standby',message:'Requesting Data...',buttons:['ok']}
    var turnOff = function(result){
      if(isBlank(dn) &amp;&amp; showAlert){
        MESSAGEBOX(msgOpts,turnOff);
      } 
      if(isBlank(dn) &amp;&amp; !showAlert){
        msgOpts.message='TIMEOUT: Unable to retrieve data within ' + time.toString + ' milliseconds'
        MESSAGEBOX(msgOpts,turnOff);
      } else{}
    }
    SETTIMEOUT(function(){showAlert=false},time)
    MESSAGEBOX(msgOpts,turnOff);
  }
}
//#endregion


/**
 * @summary Loads records from a Fulcrum form
 * @description Loads the form schema and creates dictionary to convert form_value keys to data_name keys.
 * This will be modified soon to utilize the new query filtering options in LOADRECORDS.
 * @property {Function} updateCallback - Function to call to process retrieved records
 * @property {Array} recIDs - Array of string _record_ids to use in LOADRECORDS.
 * @property {Object} appFvs - Dictionary converting form_value keys to data_names
 * @property {Array} appRecords - Array of loaded records with form_value keys converted to data_name keys.
 * @class
 */
class MLoadRecs{
  constructor(recIDs,formID,updateCallback){
    this.updateCallback = updateCallback || null;
    this.formID = formID || null;
    this.recIDs = recIDs || null;
    this.appFvs = {'test':'hello'};
    this.appRecords = [];
  }

  /**
   * @summary Loads form
   * @description Sends form to Callback function to process.
   * @param {string} formID 
   * @param {function} callBack 
   * @param {boolean} recordsOnLoad -
   */
  loadForm(formID,callBack,recordsOnLoad){
    LOADFORM(
      {id:formID},
      (e,r)=>{if(e){ALERT('LOADFORM failed:' + JSON.stringify(e))}else{callBack(r.form,recordsOnLoad)}}
    )
  }

  /**
   * @summary Loads records
   * @description Sends records to Callback to process.
   * @param {string[]} arr 
   * @param {string} formID 
   * @param {function} callback 
   */
  loadRecords(arr,formID,callback){
    const opts = !arr ? {'form_id':formID} : {'ids':arr,'form_id':formID};
    const pullRecords = (e,r)=>{if(e){ALERT('LOADRECORDS failed:' + JSON.stringify(e))}else{callback(r.records)}}
    LOADRECORDS(opts,pullRecords);
  }

  /**
   * @summary Loads form to get field schema.
   * @description Use in ON('load-record') even. This method will continue to immediately load all records from that form.
   * @param {*} event 
   */
  getAppFvs(event){
    this.loadForm(this.formID,this.processForm,true)
  }

  /**
   * @summary Loads form to get field schema.
   * @description Use in ON('load-record') event. This method will **NOT** continue to load any records.
   * Records can be loaded later based on a ON('change') event.
   * @param {*} event 
   */
  buildAppFvDict(event){
    this.loadForm(this.formID,this.processForm,false)
  }

  /**
   * @summary Create form_value key to data_name dictionary.
   * @description This is the Callback for this.loadForm.
   * @param {*} form 
   * @param {boolean} recordsOnLoad - Passed from initiator method to decide if records should be loaded immediately after form dictionary is created.
   */
  processForm(form=null,recordsOnLoad){
    if(form){
      this.appFvs=M.flipKVpair(M.makeFvDict(form))
      if(recordsOnLoad) this.loadRecords(this.recIDs,this.formID,this.processRecords)
    }
  }

  /**
   * @summary Converts records JSON to JSON of {data_name:value} pairs.
   * @description This is the Callback for this.loadRecords.
   * @param {*} records 
   */
  processRecords(records){
    if(records.length &lt;= 0){return}
    this.appRecords = M.convertFV2DN(records,this.appFvs)
    if(this.updateCallback){
      this.updateCallback()
    }
  }

  // function getFormFlds(appID){
  //   const apiurl = `https://api.fulcrumapp.com/api/v2/forms/${appID}.json?schema=true`;
  //   const options = {
  //     url: apiurl,
  //     method: 'GET',
  //     headers: {
  //       'X-ApiToken': mToken,
  //       'Accept': 'application/json'
  //     }
  //   };

  //   REQUEST(options, function (error, response, body) {
      
  //     if (error) {
  //       ALERT('Error with request: ' + INSPECT(error));
  //     } else {
  //       if (body) {
  //         var rows = JSON.parse(body);
  //         const elements = rows.form.elements
  //         var output = []
          
  //         elements.forEach(function(element){
  //           if(element.elements){
  //             output = output.concat(element.elements)
  //           }
  //           else{
  //             output.push(element)
  //           }
  //         })
  //         return output
  //       }
  //       // if(!response.form.elements){return response}
  //     }
  //   });
  // }
}

export { Helpers,FulcrumHelpers,MLoadRecs };
</code></pre>
		</section>
			</div>
		</div>
	</div>
	<footer>
				<div class="copyright"> </div>
			<div class="generated-by">Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a> on 20th Sep 2025 using the <a href="https://github.com/steveush/foodoc">FooDoc template</a>.</div>
	</footer>
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/clipboard.min.js"></script>
	<script src="js/prism.min.js"></script>
	<script src="js/template.min.js"></script>
		<!-- start:lunr-search-modal.hbs -->
		<div class="modal fade" id="lunr-search-modal">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">Search results</h4>
					</div>
					<div class="modal-body" id="lunr-search-body">
					</div>
					<div class="modal-footer" id="lunr-search-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div>
		<!-- end:lunr-search-modal.hbs -->		<script src="js/lunr.min.js"></script>
	
</body>
</html>
<!-- end:source.tmpl.hbs -->