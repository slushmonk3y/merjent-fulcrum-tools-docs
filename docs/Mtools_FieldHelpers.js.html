<!-- start:source.tmpl.hbs -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
		<title>Mtools/FieldHelpers.js</title>
		<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<link href="https://fonts.googleapis.com/css?family=PT+Mono" rel="stylesheet">
		<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css">
		<link type="text/css" rel="stylesheet" href="css/prism.min.css">
		<link type="text/css" rel="stylesheet" href="css/template.min.css">
		<script type="text/javascript">
			window.TEMPLATE_OPTIONS = {"includeDate":true,"dateFormat":"Do MMM YYYY","systemName":"Merjent Fulcrum Tools","systemSummary":"Modules for modifying Fulcrum apps","systemLogo":"","systemColor":"","navMembers":[{"kind":"module","title":"Modules","summary":"All documented modules."},{"kind":"class","title":"Classes","summary":"All documented classes."},{"kind":"external","title":"Externals","summary":"All documented external members."},{"kind":"global","title":"Globals","summary":"All documented globals."},{"kind":"mixin","title":"Mixins","summary":"All documented mixins."},{"kind":"interface","title":"Interfaces","summary":"All documented interfaces."},{"kind":"namespace","title":"Namespaces","summary":"All documented namespaces."},{"kind":"tutorial","title":"Tutorials","summary":"All available tutorials."}],"footer":"","copyright":" ","linenums":true,"collapseSymbols":true,"inverseNav":true,"inlineNav":false,"outputSourceFiles":false,"sourceRootPath":null,"disablePackagePath":true,"outputSourcePath":false,"showTableOfContents":true,"showAccessFilter":true,"analytics":null,"methodHeadingReturns":true,"sort":"longname","search":true,"favicon":null,"stylesheets":[],"scripts":[],"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":false}};
			window.DOCLET_TOC_ENABLED = false;
			window.DOCLET_AFILTER_ENABLED = false;
		</script>
</head>
<body>
	<!-- start:navbar.hbs -->
	<header class="navbar navbar-default navbar-fixed-top navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand" href="index.html">
					Merjent Fulcrum Tools
				</a>
				<!-- displayed on small devices -->
				<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<div class="navbar-collapse collapse" id="topNavigation">
				<ul class="nav navbar-nav">
								<li class="dropdown">
									<a href="list_class.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
									<ul class="dropdown-menu">
											<li><a href="DataEventHelpers.html">DataEventHelpers</a></li>
											<li><a href="FieldHelpers.html">FieldHelpers</a></li>
											<li><a href="FulcrumHelpers.html">FulcrumHelpers</a></li>
											<li><a href="Helpers.html">Helpers</a></li>
											<li><a href="MerjentApp.html">MerjentApp</a></li>
											<li><a href="ReportHelpers.html">ReportHelpers</a></li>
											<li><a href="RequestHelpers.html">RequestHelpers</a></li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="list_module.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
									<ul class="dropdown-menu">
											<li><a href="module-dataEventMtools.html">dataEventMtools</a></li>
											<li><a href="module-merjentAppModule.html">merjentAppModule</a></li>
											<li><a href="module-reportMtools.html">reportMtools</a></li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="list_namespace.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b class="caret"></b></a>
									<ul class="dropdown-menu">
											<li><a href="MerjentApp.AppTemplates.html">MerjentApp.AppTemplates</a></li>
											<li><a href="MerjentApp.DefaultMethods.html">MerjentApp.DefaultMethods</a></li>
											<li><a href="MerjentApp.PermissionMethods.html">MerjentApp.PermissionMethods</a></li>
											<li><a href="MerjentApp.StatusMethods.html">MerjentApp.StatusMethods</a></li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="list_tutorial.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
									<ul class="dropdown-menu">
											<li><a href="MerjentApp.html">MerjentApp</a></li>
											<li><a href="tutorial-Utils.html">Utils</a></li>
									</ul>
								</li>
				</ul>
					<!-- start:lunr-search-navbar.hbs -->
					<form class="navbar-form navbar-right" role="search">
						<div class="input-group">
							<input type="text" class="form-control" placeholder="Search" id="lunr-search-input">
							<div class="input-group-btn">
								<button class="btn btn-default" id="lunr-search-submit">
									<i class="glyphicon glyphicon-search"></i>
								</button>
							</div>
						</div>
					</form>
					<!-- start:lunr-search-navbar.hbs -->		</div>
		</div>
	</header>
	<!-- end:navbar.hbs -->		<div class="page-header">
			<div class="container">
				<span class="kind">source</span>
				<h1><span class="name">Mtools/FieldHelpers.js</span></h1>
			</div>
		</div>
	<div class="container content">
		<div class="row">
			<div class="col-md-12 main-content">
		<section class="source-section">
			<article></article>
			<pre class="prettyprint source language-javascript line-numbers"><code class="language-javascript">import { Helpers,FulcrumHelpers,MLoadRecs } from "./FulcrumHelpers";

//#region ********************************* FIELD HELPERS ************************************/
/**
 * @description Properties of mFld are the same as Fulcrum field properties, except 'parent'.
 * 
 * With the addtion of the 'span' and 'opt' properties.
 * @memberof FieldHelpers
 * @typedef {Object} Mfld
 * @property {string} label - All fields
 * @property {string} type - All fields - if field is a Label type that should be displayed on pdf. Manually alter this value to 'mLabel'
 * @property {string} key - All fields
 * @property {string} description - All fields
 * @property {string} data_name - All fields
 * @property {boolean} hidden - All fields
 * @property {string} parent - All fields - in Mfld this is stripped down to containing only the data_name of the direct parent.
 * @property {boolean} numeric - Numeric field
 * @property {string} format - Numeric field
 * @property {string} min - Numeric field
 * @property {string} max - Numeric field
 * @property {string} display - Section
 * @property {boolean} neutral_enabled - yesNoField
 * @property {string} positive - yesNoField
 * @property {string} negative - yesNoField
 * @property {string} neutral - yesNoField
 * @property {boolean} multiple - choiceField
 * @property {boolean} allow_other - choiceField
 * @property {string} choice_list_id - choiceField
 * @property {string} use_choice_list - choiceField
 * @property {Array} choices - choiceField
 * @property {number} span - Mfld - default is 4
 * @property {string} opt - Mfld
 */
class Mfld{
  constructor(){
    this.label = ''
    this.type=''
    this.key=''
    this.description=''
    this.data_name=''
    this.hidden=null
    this.parent=''
    this. numeric
    this.format=''
    this.min=''
    this.max=''
    this.display=''
    this. neutral_enabled=null
    this.positive=''
    this.negative=''
    this.neutral=''
    this.multiple=null
    this.allow_other=null
    this.choice_list_id=''
    this.use_choice_list=''
    this.choices=[]
    this.span=4
    this.opt=''
  }
}

/**
 * @description Properties are strings starting with -. ie: '-hcb'.
 * 
 * Entire opt property of Mfld is a concatenated string. ie: '-cb-hcb-rdo'
 * @memberof FieldHelpers
 * @typedef {string} MfldOpt 
 * @property {string} na - replaces null values with 'N/A' instead of '---'
 * @property {string} syn - short yes no: Positive and negative labels replaced with first character. Neutral replaced with first 3 characters. (ie: Y | N | N/A)
 * @property {string} cb - Display choice values as a list of checkboxes. Checkboxes will be displayed vertically.
 * @property {string} hcb - Modifier for -cb. Checkboxes will be displayed horizontally.
 * @property {string} yon - yes no only: Neutral label will not be displayed.
 * @property {string} rdo - Modifier for -cb. Checkboxes will be replaced with radio buttons.
 */

/**
 * @description Enter either a value for "center" or "data_name" NOT both. If both are entered, "center" will take precedence.
 * If the section is part of a repeatable and "data_name" is used you must also enter the "rep_data_name" property.
 * 
 * Options for center value property are: 'data_name', 'center', 'rep_data_name'
 * @memberof ReportHelpers
 * @typedef {Object} SecOpt
 * @property {boolean} [hide=false] - Set to true to hide section header
 * @property {string} [prefix=''] - Prefix of section header
 * @property {string} [center] - Text for body of section header, overrides data_name and rep_data_name
 * @property {string} [data_name] - data name of section or field LABEL() will be used as body of section header
 * @property {string} [rep_data_name] - data name of Repeatable, LABEL() will be used as body of section header
 * @property {string} [suffix=''] - Suffix of section header
 * @property {boolean} [lblIndex=false] - Set to true and index included will be printed after prefix.
 * @property {number} [index=null] - Index of repeatable section, will be calculated automatically by other methods if section is from a repeatable.
 
 
 * 
 */
class SecOpt{
  constructor(prefix=null,center=null,suffix=null,lblIndex=false){
    this.hide=false
    this.prefix=prefix
    this.center=center
    this.data_name=''
    this.rep_data_name=''
    this.suffix=suffix
    this.lblIndex=lblIndex
    this.index=null
    this.css= 'mjnt-sectionHeader spacer-top'
  }

  getCenter(){
    return this.center ? this.center
         : this.rep_data_name ? this.formatVal(REPEATABLEVALUES(VALUE(this.rep_data_name), this.data_name)[this.index])
            : this.data_name ? LABEL(this.data_name)
               : '';
  }

  text(){
    if(this.hide == true){return ''}
    const prefix = this.prefix ? `${this.prefix} ` : '';
    const center = this.getCenter();
    const suffix = this.suffix ? `${this.suffix} ` : '';
    const numLbl = this.lblIndex ? `- ${(this.index + 1).toString()}` : '';

    return `${prefix}${center}${suffix}${numLbl}`;
  }

  html(){
    if(this.hide == true){return ''}
    const secTxt = this.text();
    const secCss = this.css
    return `&lt;div class="${secCss}">${secTxt}&lt;/div>` 
  }

  getIndex(){
    return this.index;
  }

  c(str){
    var p = this[str];
    return typeof p === 'function' ? this[str]()
      : p ? p
        : '';
  }
}

/**
 * @summary Class creating array of Mflds
 * @description It has the same methods as a standard array with the addition of the .m method.
 * New MfldColl is created from mkMfld() method in Field Helpers Class.
 * @class
 * @memberof FieldHelpers
 * @typedef {Array} MfldColl
 * @property {Function} m - Returns index of Mfld in MfldColl by its data_name value.
 */
function MfldColl(){Array.call(this)}
MfldColl.prototype = Object.create(Array.prototype);
MfldColl.prototype.constructor = MfldColl;

/**
 * @description Find index of Mfld in array of Mflds (MfldColl) by data name.
 * @param {*} dn 
 * @returns {number}
 * @example mflds.m('inspector_name').span = 6; // set span of inspector_name field to 6
 */
MfldColl.prototype.m = function(dn) {
  return this[this.findIndex(x => x.data_name === dn)];
}

/**
 * @description This class contains helper methods for working with fields in a form. It is intended to be used in conjunction with the Helpers class.
 */
class FieldHelpers extends FulcrumHelpers {
  constructor(){super()}

  /**
   * Checks if a field option string contains a specific option.
   * 
   * @description Current options supported:
   * -rdo = radio buttons instead of checkboxes
   * -cb = choice boxes (checkboxes)
   * -hcb = horizontal choice boxes
   * -syn = short yes no (first letter only)
   * -yon = yes no only (no neutral option)
   * -na = replace null values with 'N/A' instead of '---'
   * -hn = hide null values (do not display field if value is null)
   * 
   * @param {string} opt - The option string (e.g., '-cb-hcb-rdo').
   * @param {string} option - The option to check for (e.g., 'cb', 'hcb', 'rdo').
   * @returns {boolean|null}
   */
  optionIs(opt = null, option = '') {
    if (!opt || !option) return null;
    return opt.indexOf(`-${option}`) >= 0 ? true : null;
  }
  
  /**
   * @description This function creates a Mfld object which possesess most of the properties as a fulcrum field with the addition of: span, opt
   * @param {string} dn - Data name of the field.
   * @param {number} [span=4] - Span value for the field.
   * @param {string} [opt=null] - Option string for the field.
   * @returns {Mfld} - Mfld object.
   */
  mkMfld(dn = '', span = 4, opt = null) {
    // List of properties to copy from the Fulcrum field
    const mfld_fldList_gen = ['label', 'type', 'key', 'description', 'data_name', 'hidden', 'parent'];
    const mfld_fldList_number = ['numeric', 'format', 'min', 'max'];
    const mfld_fldList_section = ['display'];
    const mfld_fldList_YN = ['neutral_enabled', 'positive', 'negative', 'neutral'];
    const mfld_fldList_choice = ['multiple', 'allow_other', 'choice_list_id', 'use_choice_list', 'choices'];
    const mfld_fldList = mfld_fldList_gen.concat(mfld_fldList_number,mfld_fldList_section,mfld_fldList_YN,mfld_fldList_choice);

    const fld = FIELD(dn);
    if (fld) {
      const obj = {};
      for (const item of mfld_fldList) {
        if (item in fld) {
          if (item !== 'parent') {
            obj[item] = fld[item];
          } else if (fld.parent &amp;&amp; fld.parent.data_name) {
            obj[item] = fld.parent.data_name;
          }
        }
      }
      obj['span'] = span;
      obj['opt'] = opt;
      return obj;
    } else {
      return { data_name: dn };
    }
  }
  
  /**
   * @description make Mflds (array of Mfld)
   *
   * @param {{}} [arr=[]] 
   * @param {string} [opt=null] 
   * @param {number} [span=4] 
   * @returns {MfldColl} 
   */
  mkMflds(arr = [], opt = null, span = 4) {
    var out = new MfldColl;
    for (var dn of arr) {
      var obj = this.mkMfld(dn, span, opt);
      out.push(obj);
    }
    return out;
  };

  /**
   * @description Description placeholder
   * 
   * MUTATES existing array
   * @param {MfldColl} mflds 
   * @param {string} [dn=''] 
   * @param {string} [key=''] 
   * @param {*} val 
   * 
   * @todo is this used anywhere? otherwise delete it.
   */
  spliceMflds(mflds, dn = '', key = '', val) {
    var pos = 0;
    mflds.forEach(function (Mfld, index) {
      if (Mfld.data_name == dn) {
        pos = index;
      }
    });
    var obj = mflds[pos];
    obj[key] = val;
    mflds.splice(pos, 1, obj);
  };

  /**
   * @description get parent data_name for a fiel
   * @param {string} dn 
   * @returns {string} - data_name of the parent (repeatable or section) of a field. If there is no parent, it returns null.
   * @example getRepDn('inspector_name') // returns 'background'
   */
  getRepDn(dn = '') {
    var obj = FIELD(dn);
    var output = null;
    if(!obj){return output}
    function traverseObject(obj) {
      if (obj.hasOwnProperty('parent') &amp;&amp; obj.parent.type == 'Repeatable') {
        output = obj.parent.data_name;
        return;
      }
      else if (obj.hasOwnProperty('parent') &amp;&amp; obj.parent.type === 'Section') {
        traverseObject(obj.parent); // Recursively traverse nested objects
      }
      else {
        return;
      }
    }
    traverseObject(obj);
    return output;
  };

  /**
   * @description This function returns the formatted value of a field. For null values default return is '---'.
   * @param {(string|Mfld)} input - field to be formatted. It can be a string, an object, or a Mfld object.
   * @param {number} [i=null] - only used for repeatable values. index of the value in a repeatable field.
   * @example fldVal('inspector_name') // returns the value of the inspector_name field
   * @example fldVal('inspector_name', 0) // returns the value of the inspector_name field in the first repeatable section
   * @returns {string} - An html string of the formatted value of the field.
   */
  fldVal(input, i = null) {
    var mfld = Object.prototype.toString.call(input) === '[object Object]' ? input : this.mkMfld(input);
    var dn = mfld.data_name;
    //If value is from a repeatable
    if (i != null  &amp;&amp; this.getRepDn(dn)) {
      var parent = this.getRepDn(dn);
      var val = !this.isBlank(REPEATABLEVALUES(VALUE(parent), dn)[i]) ? REPEATABLEVALUES(VALUE(parent), dn)[i] : null;
      return this.getReportVal(dn, mfld, val);
    }
    //If value is from parent
    var val = mfld.value ? mfld.value : null;
    return this.getReportVal(dn,mfld,val);
  };

  
  /**
   * @description Description placeholder
   *
   * @param {string} [dn=''] 
   * @param {*} [mfld=null] 
   * @param {*} [val=null] - val only needed for repeatable values
   * @returns {*} - html string
   */
  getReportVal(dn = '', mfld = null, val = null) {
    // val = val ? val : VALUE(dn)
    val = val || VALUE(dn);
    var naVal = this.optionIs(opt,'na') ? 'N/A' : '---';
    

    var opt = mfld &amp;&amp; mfld.opt ? mfld.opt : null;
    var fldType = mfld &amp;&amp; mfld.type ? mfld.type : FIELDTYPE(dn);

    
    if (fldType == 'ChoiceField' || fldType == "ClassificationField") {
      if (this.optionIs(opt,'cb') == true || this.optionIs(opt,'hcb') == true) {
        return this.choiceBoxes(mfld, val);
      }
      if (this.isBlank(val)) { return naVal; }
      val = CHOICEVALUES(val) ? CHOICEVALUES(val)
              :!Array.isArray(val) ? val.split(',') : [val]
      return val.join(', ');
    }
    else if (fldType == 'YesNoField') {
      return this.customynBox(mfld, val);
    }
    else if(this.isBlank(val)){
      return naVal
    }
    else if (fldType == 'DateTimeField') {
      // if (this.isBlank(val)) { return naVal; }
      var dt = new Date(val);
      return this.dt2iso(dt);
    }
    else if (fldType == 'TextField' || fldType == 'CalculatedField') {
      return val
      // return this.isBlank(val) ? naVal : val;
    }
    else if (fldType == 'AddressField') {
      return this.formatAddress(val)
      // return this.isBlank(val) ? naVal : this.formatAddress(val);
    }
    else if (fldType == 'TimeField') {
      return val
      // return this.isBlank(val) ? naVal : val;
    }
    else if (fldType == 'Repeatable') {
      return 'ERROR in fldVal function: RepeatableField input';
    }
    else if (fldType == 'RecordLinkField') {
      return 'ERROR in fldVal function: RecordLinkField input';
    }
    else if (fldType == 'Label' || fldType == 'Section' || fldType == 'PhotoField' || fldType == 'VideoField' || fldType == 'AudioField' || fldType == 'BarcodeField' || fldType == 'SignatureField' || fldType == 'HyperlinkField') {
      return 'ERROR in fldVal function: Label, Section, PhotoField, VideoField, AudioField, BarcodeField, SignatureField, HyperlinkField input';
    }
    else {
      return 'ERROR in fldVal function: Unknown error';
    }
    /**
     * TODO: ADD SUPPORT FOR record link fields. This will require a new helper function to retrieve the linked record data.
     * else if (fldType == 'RecordLinkField' ){}
     */
  };

  
  /**
   * @description get custom yn field as appropriate
   * 
   * opt = -syn | -yno | -rdo
   * -syn  only first letter of label (or 3 if neutral)
   *
   * @todo Add option to color boxes green/red if yes/no
   * @param {(string|Mfld)} input - Mfld. Checks neutral_enabled. opt = optionIsShortYN | optionIsYonly | optionIsRadio
   * @param {*} [val=null] - val is only used for yn boxes in a repeatable
   * @returns {string} - html string
   */
  customynBox(input, val = null) {
    // Convert input to Mfld object if it's not already
    var mfld = Object.prototype.toString.call(input) === '[object Object]' ? input : this.mkMfld(input);
    var dn = mfld.data_name;

    // Determine the value to use
    val = val || VALUE(dn);

    // Extract options from Mfld
    var neutralEnabled = mfld.neutral_enabled || null;
    var opt = mfld.opt || null;
    var isAbbrev = opt ? this.optionIs(opt,'syn') : null;
    var isYOnly = opt ? this.optionIs(opt,'yon') : false;
    var inputType = opt &amp;&amp; this.optionIs(opt,'rdo') ? "radio" : "checkbox";

    // Extract positive, negative, and neutral values and labels
    var positiveLbl = isAbbrev ? mfld.positive.label.slice(0, 1) : mfld.positive.label;
    var negativeLbl = isAbbrev ? mfld.negative.label.slice(0, 1) : mfld.negative.label;
    var neutralLbl = isAbbrev ? mfld.neutral.label.slice(0, 3) : mfld.neutral.label;

    // Determine which checkboxes should be checked
    var isCheckedPositive = val == mfld.positive.value ? 'checked' : '';
    var isCheckedNegative = val == mfld.negative.value ? 'checked' : '';
    var isCheckedNeutral = val == mfld.neutral.value ? 'checked' : '';

    // Create templates for the checkboxes
    var ynTemplate = `\
      &lt;div class="checks">\
        &lt;div>&lt;input type="${inputType}" ${isCheckedPositive}>&lt;/div>\
        &lt;div>${positiveLbl}&lt;/div>\
        &lt;div>&lt;input type="${inputType}" ${isCheckedNegative}>&lt;/div>\
        &lt;div>${negativeLbl}&lt;/div>\
      &lt;/div>`;
    
    var ynnaTemplate = `\
      &lt;div class="checks">\
        &lt;div>&lt;input type="${inputType}" ${isCheckedPositive}>&lt;/div>\
        &lt;div>${positiveLbl}&lt;/div>\
        &lt;div>&lt;input type="${inputType}" ${isCheckedNegative}>&lt;/div>\
        &lt;div>${negativeLbl}&lt;/div>\
        &lt;div>&lt;input type="${inputType}" ${isCheckedNeutral}>&lt;/div>\
        &lt;div>${neutralLbl}&lt;/div>\
      &lt;/div>`;
    
    var yOnlyTemplate = `\
      &lt;div class="checks">\
        &lt;div>&lt;input type="${inputType}" ${isCheckedPositive}>&lt;/div>\
      &lt;/div>`;

    // Determine the final output based on the options
    var output = neutralEnabled ? ynnaTemplate : ynTemplate;
    output = isYOnly ? yOnlyTemplate : output;

    return output;
  };

  /**
   * @description Create list of checkboxes for choicevalues 
   * 
   * opts = -hcb
   * -hcb is horizontal choiceboxes, default is vertical choiceboxes.
   *
   * @param {*} input 
   * @param {*} [val=null] 
   * @returns {string} - html string
   */
  choiceBoxes(input, val = null){
    // Convert input to Mfld object if it's not already &amp; Determine the value to use
    var mfld = Object.prototype.toString.call(input) === '[object Object]' ? input : this.mkMfld(input);
    var dn = mfld.data_name;
    val = val ? CHOICEVALUES(val) : CHOICEVALUES(VALUE(dn));

    // Extract options from Mfld
    var choices = mfld.choices;
    var opt = mfld.opt || null;
    var isHorizontal = opt &amp;&amp; this.optionIs(opt,'hcb') ? true : false;
    var inputType = opt &amp;&amp; this.optionIs(opt,'rdo') ? "radio" : "checkbox";

    let output = isHorizontal ? '&lt;div class="horizChoices">' : '&lt;div class="flex-col">';

    // Helper function to create a checkbox element
    const createCheckbox = (choice, isChecked) => `
      &lt;div class="checks">\
        &lt;div>&lt;input type="${inputType}" ${isChecked ? 'checked' : ''}>&lt;/div>\
        &lt;div>${choice.label}&lt;/div>\
      &lt;/div>`;

    // Add checkboxes for each choice
    for(const choice of choices) {
      const isChecked = val &amp;&amp; val.includes(choice.value);
      output += createCheckbox(choice, isChecked);
    };

    // for (var i = 0; i &lt; choices.length; i++) {
    //     var chk = val &amp;&amp; val.includes(choices[i].value) ? ' checked' : '';
    //     output = output + '&lt;div class="checks">&lt;div>&lt;input type=' + inputType + ' ' + chk + '>&lt;/div>&lt;div>' + choices[i].label + '&lt;/div>&lt;/div>';
    // }

    if (mfld.allow_other == true) {
      const otherValue = OTHER(VALUE(dn)) || '&amp;nbsp';
      const isChecked = OTHER(VALUE(dn)) ? 'checked' : '';
      const otherHtml = `\
        &lt;div class="checks">\
          &lt;div>&lt;input type="${inputType}" ${isChecked}>&lt;/div>\
          &lt;div>Other: &lt;/div>\
          &lt;div style="margin-left:3px;">${otherValue}&lt;/div>\
        &lt;/div>`;
      output += otherHtml;
    }
    return output + '&lt;/div>';
  };
}
//#endregion

export { Helpers,FulcrumHelpers,MLoadRecs,FieldHelpers,MfldColl,Mfld,SecOpt };
</code></pre>
		</section>
			</div>
		</div>
	</div>
	<footer>
				<div class="copyright"> </div>
			<div class="generated-by">Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a> on 15th Sep 2025 using the <a href="https://github.com/steveush/foodoc">FooDoc template</a>.</div>
	</footer>
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/clipboard.min.js"></script>
	<script src="js/prism.min.js"></script>
	<script src="js/template.min.js"></script>
		<!-- start:lunr-search-modal.hbs -->
		<div class="modal fade" id="lunr-search-modal">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">Search results</h4>
					</div>
					<div class="modal-body" id="lunr-search-body">
					</div>
					<div class="modal-footer" id="lunr-search-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div>
		<!-- end:lunr-search-modal.hbs -->		<script src="js/lunr.min.js"></script>
	
</body>
</html>
<!-- end:source.tmpl.hbs -->